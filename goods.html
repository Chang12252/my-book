<!DOCTYPE html>
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en-US"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en-US"> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en">
	<head>

		<!-- TITLE OF SITE -->
		<title>Rik - App Landing Page Template</title>

		<!-- Meta -->
		<meta charset="utf-8">
		<meta name="description" content="app landing page template" />
		<meta name="keywords" content="rik, landing page, gradient background, image background, video background, template, responsive, bootstrap" />

		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

		<!-- FAV AND TOUCH ICONS   -->
		<link rel="icon" href="images/favicon.ico">
		<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
		<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

		<!-- GOOGLE FONTS -->
		<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,600' rel='stylesheet' type='text/css'>

		<!-- BOOTSTRAP CSS -->
		<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">

		<!-- POP UP IMAGE AND VIDEO -->
		<link rel="stylesheet" href="css/plagin-css/plagin.css">

		<!-- FONT ICONS -->
		<link rel="stylesheet" href="icons/rik-icons/styles.css">

		<!--   COUSTOM CSS link  -->
		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="css/responsive.css">

		<!-- COLOR -->
		<link rel="stylesheet" href="css/colors/color-1.css" type="text/css" id="color-scheme" />
		<!-- <link rel="stylesheet" href="css/colors/color-2.css" type="text/css"/> -->
		<!-- <link rel="stylesheet" href="css/colors/color-3.css" type="text/css"/> -->
		<link rel="stylesheet" type="text/css" href="css/stylebox.css" />
		<!--[if lt IE 9]>
	        <script src="js/plagin-js/html5shiv.js"></script>
	        <script src="js/plagin-js/respond.min.js"></script>
	    <![endif]-->
		<script src="js/sshm.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/jquery-3.4.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="https://cdn.staticfile.org/vue/2.4.2/vue.min.js"></script>
		<script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>
		<!-- <script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script> -->

		<link rel="stylesheet" type="text/css" href="css/input.css" />
		<link rel="stylesheet" type="text/css" href="css/inputc.css" />
		<script src="js/input.js" type="text/javascript" charset="utf-8"></script>
		<style type="text/css">
			td {
				vertical-align: middle;
			}

			.green {
				background: limegreen;
			}

			.red {
				background: orangered;
			}
			
			.toggle {
				margin-top:0;
			}
		</style>
	</head>
	<body class="">


		<!-- Start: Navbar Area
        ============================= -->
		<header id="header" class="okayNav-header navbar-fixed-top main-navbar-top">
			<div class="container">
				<div class="row">

					<div class="col-lg-3 col-md-3 col-sm-3 col-xs-6">

						<!-- TEMPLATE LOGO LIGHT -->
						<a class="navbar-brand light-logo" href="index.html"><img src="images/logo-color.png" alt="" class="img-responsive"></a>

					</div> <!-- End: .col-xs-3 -->
					<div class="col-lg-9 col-md-9 col-sm-9 col-xs-6">

						<nav role="navigation" class="okayNav pull-right" id="js-navbar-menu">
							<ul id="navbar-nav" class="navbar-nav">
								<li><a class="btn-nav" href="">Features</a></li>
								<li><a class="btn-nav" href="">How it works</a></li>
								<li><a class="btn-nav" href="">Describe</a></li>
								<li><a class="btn-nav" href="">Subscribe</a></li>
								<li><a class="btn-nav" href="">Screenshots</a></li>
								<li><a class="btn-nav" href="">Download App</a></li>
							</ul>
						</nav>

					</div> <!-- End: .col-xs-9 -->
				</div> <!-- End: .row -->
			</div> <!-- End: .container -->
		</header><!-- /header -->
		<!-- End: Navbar Area
        ============================= -->
		<div id="box">
			<table class="table table-striped">

				<p v-text="orders"></p>
				<caption v-text="orders[0].goodsName"></caption>
				<thead>
					<tr>
						<th>买家</th>
						<th>详细</th>
					</tr>
				</thead>
				<tbody>
					<tr v-for="site in orders[0].orders">
						<td v-text="site.buyer.buyerName"></td>

						<!-- <td v-if="site.orderStatus == 1">已支付</td>
						<td v-else>未支付</td>
						<td v-if="site.pickupStatus == 1">已取货</td>
						<td v-else>未取货</td>
						<td v-text="site.buyCount"></td>
						<td v-if="site.goodsRemake == null||site.goodsRemake == ''">无</td>
						<td v-else v-text="site.goodsRemake"></td> -->

						<td>
							<div style="display: none;" class="testssss">
								<div class="buyerName" v-text="site.buyer.buyerName"></div>
								<div class="orderId" v-text="site.orderId"></div>
								<div class="goodsId" v-text="site.goodsId"></div>
								<div class="orderStatus" v-text="site.orderStatus"></div>
								<div class="pickupStatus" v-text="site.pickupStatus"></div>
								<div class="buyCount" v-text="site.buyCount"></div>
								<div class="goodsRemake" v-text="site.goodsRemake"></div>
								<div class="buyerId" v-text="site.buyerId"></div>
								<div class="goodsName" v-text="orders[0].goodsName"></div>
							</div>
							<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal2" onclick="outshow(this)">详细</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
			添加订单
		</button>
		<!-- 模态框（Modal） -->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content" id="addBox">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
							&times;
						</button>
						<h4 class="modal-title" id="myModalLabel">
							添加订单
						</h4>
					</div>
					<div class="modal-body">
						买家名称
						<br />
						<input type="text" v-model="buyerName" />
						<br />
						购买数量
						<br />
						<input type="text" v-model="buyCount" />
						<br />
						是否付款
						<br />
						<div class="toggle toggle--like">
							<input type="checkbox" id="toggle--like" @click="chickboxchange()" v-model="orderStatusBool" class="toggle--checkbox"
							 checked="checked" />
							<label class="toggle--btn" for="toggle--like"><span class="toggle--feature"></span></label>
						</div>
						<br />
						备注(颜色，尺寸等)
						<br />
						<input type="text" v-model="goodsRemake" />
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-dismiss="modal">关闭
						</button>
						<button type="button" class="btn btn-primary testbutton" @click="addOrder()">
							添加
						</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal -->
		</div>
		<div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						{{goodsName}}
					</div>
					<div class="modal-body">
						<span class="input input--isao">
							<input class="input__field input__field--isao" v-model="buyerName" type="text" id="input-buyer">
							<label class="input__label input__label--isao" for="input-buyer" data-content="买家名称">
								<span class="input__label-content input__label-content--isao">买家名称</span>
							</label>
						</span>
						<br />
						<div class="toggle toggle--like">
							<input type="checkbox" id="toggle-orderStatus" @click="chickOrderStatusChange()" v-model="orderStatusBool" class="toggle--checkbox"/>
							<label class="toggle--btn" for="toggle-orderStatus"><span class="toggle--feature"></span></label>
						</div>
						支付状态:<span v-if="orderStatus==1">已支付</span><span v-else>未支付</span>
						<br />
						<div class="toggle toggle--daynight">
							<input type="checkbox" id="toggle-pickupStatus" @click="chickPickupStatusChange()" v-model="pickupStatusBool" class="toggle--checkbox">
							<label class="toggle--btn" for="toggle-pickupStatus"><span class="toggle--feature"></span></label>
						</div>
						取货状态:<span v-if="pickupStatus==1">已取货</span><span v-else>未取货</span>
						<br />
						<span class="input input--isao">
							<input class="input__field input__field--isao" v-model="buyCount" type="text" id="input-buyCount">
							<label class="input__label input__label--isao" for="input-buyCount" data-content="购买数量">
								<span class="input__label-content input__label-content--isao">购买数量</span>
							</label>
						</span>
						<br />
						<span class="input input--isao">
							<input class="input__field input__field--isao" v-model="goodsRemake" type="text" id="input-goodsRemake">
							<label class="input__label input__label--isao" for="input-goodsRemake" data-content="订单备注">
								<span class="input__label-content input__label-content--isao">订单备注</span>
							</label>
						</span>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-dismiss="modal">关闭</button>
						<button type="button" class="btn btn-primary testbutton" @click="addOrder()">
							修改
						</button>
					</div>
				</div>
			</div>
		</div>

		<script type="text/javascript">
			function outshow(dom) {
				outshowVue.$data.goodsId = $(dom).prev().children(".goodsId").html();
				outshowVue.$data.buyerName = $(dom).prev().children(".buyerName").html();
				outshowVue.$data.buyerId = $(dom).prev().children(".buyerId").html();
				outshowVue.$data.orderStatus = $(dom).prev().children(".orderStatus").html();
				outshowVue.$data.pickupStatus = $(dom).prev().children(".pickupStatus").html();
				outshowVue.$data.goodsRemake = $(dom).prev().children(".goodsRemake").html();
				outshowVue.$data.buyCount = $(dom).prev().children(".buyCount").html();
				outshowVue.$data.goodsName = $(dom).prev().children(".goodsName").html();
				outshowVue.$data.orderStatusBool = outshowVue.$data.orderStatus == 0 ? false:true;
				outshowVue.$data.pickupStatusBool = outshowVue.$data.pickupStatus == 0 ? false:true;
			}

			var outshowVue = new Vue({
				el: '#myModal2',
				data() {
					return {
						goodsId: null,
						buyerId: null,
						orderStatus: 0,
						pickupStatus: 0,
						buyCount: null,
						goodsRemake: null,
						buyerName: null,
						orderStatusBool: 0,
						pickupStatusBool: null,
						goodsName: null,
					}
				},
				methods:{
					chickOrderStatusChange: function() {
						this.$data.orderStatus = this.$data.orderStatusBool != true ? 0 : 1;
						if(confirm("确定吗？")){
							alert("您确定修改了");
						}else{
							alert("您取消了修改");
						}
					},
					chickPickupStatusChange:function() {
						this.$data.pickupStatus = this.$data.pickupStatusBool != true ? 0 : 1;
						if(confirm("确定吗？")){
							alert("您确定修改了");
						}else{
							alert("您取消了修改");
						}
					},
				},
			});
			var vm = new Vue({
				el: '#box',
				data() {
					return {
						orders: null
					}
				},
				methods: {
					post: function() {
						/* //发送 post 请求
			        this.$http.post('http://localhost:8080/addBuyer',
					{buyerName:""},
					{emulateJSON:true}).then(function(res){
			            alert(res);
			        }); */
						//发送get请求
						this.$http.get('http://localhost:8080/getGoodsInfo').then(function(res) {
							this.$data.orders = res.body;
						}).catch(error => {
							alert("网络错误:" + error);
						});
					}
				}
			});
			window.onload = function() {
				vm.post();
			}
		</script>
		<script type="text/javascript">
			var vue1 = new Vue({
				el: '#addBox',
				data: {
					goodsId: null,
					buyerId: null,
					orderStatus: 0,
					pickupStatus: 0,
					buyCount: null,
					goodsRemake: null,
					buyerName: null,
					orderStatusBool: 0
				},
				methods: {
					addOrder: function() {
						//发送 post 请求
						this.$http.post('http://localhost:8080/getBuyerByName', {
							buyerName: this.$data.buyerName
						}, {
							emulateJSON: true
						}).then(function(res) {
							if (res.body != null && res.body != "") {
								this.$http.post('http://localhost:8080/addOrder', {
									goodsId: vm.$data.orders[0].goodsId,
									buyerId: res.body[0].buyerId,
									orderStatus: this.$data.orderStatus,
									pickupStatus: this.$data.pickupStatus,
									buyCount: this.$data.buyCount,
									goodsRemake: this.$data.goodsRemake
								}, {
									emulateJSON: true
								}).then(mes => {
									if (mes.body == true) {
										alert("添加订单成功");
										$('#myModal').modal('hide');
										location.reload(true);
									} else {
										alert("添加订单失败,请检查网络");
									}
								}).catch(error => {
									alert("请检查网络");
								});
							} else {
								this.$http.post('http://localhost:8080/addBuyer', {
									buyerName: this.$data.buyerName
								}, {
									emulateJSON: true
								}).then(succ => {
									alert(succ + " " + succ.body);
									if (succ.body > 0) {
										alert("自动添加买家成功");
										this.$http.post('http://localhost:8080/addOrder', {
											goodsId: vm.$data.orders[0].goodsId,
											buyerId: succ.body,
											orderStatus: this.$data.orderStatus,
											pickupStatus: this.$data.pickupStatus,
											buyCount: this.$data.buyCount,
											goodsRemake: this.$data.goodsRemake
										}, {
											emulateJSON: true
										}).then(function(mes) {
											if (mes.body > 0) {
												alert("添加订单成功");
												location.reload(true);
												/* this.$data.buyerId = null;
												this.$data.orderStatus = 0;
												this.$data.pickupStatus = 0;
												this.$data.buyCount = null;
												this.$data.goodsRemake = null;
												this.$data.buyerName = null;
												this.$data.orderStatusBool = 0; */
											} else {
												alert("添加订单失败,请检查网络");
											}
										}).catch(error => {
											alert("添加订单失败" + error);
										});
									} else {
										alert("添加失败,请检查网络");
									}
								}).catch(error => {
									alert("添加买家失败:" + error);
								});
							}
						}).catch(error => {
							alert('整体添加失败:' + error.body);
						});
					},
					chickboxchange: function() {
						this.$data.orderStatus = this.$data.orderStatusBool != true ? 0 : 1;
						alert(vm.$data.orders[0].goodsId);
					}
				}
			});
		</script>
		<!-- <script type="text/javascript">
			jQuery(document).ready(function ($) {
			  if (window.history && window.history.pushState) {
			    $(window).on('popstate', function () {
			      var hashLocation = location.hash;
			      var hashSplit = hashLocation.split("#!/");
			      var hashName = hashSplit[1];
			      if (hashName !== '') {
			        var hash = window.location.hash;
			        if (hash === '') {
			          alert("希望该网站能提供你帮助！");
			        }
			      }
			    });
			    window.history.pushState('forward', null, './#forward');
			  }
			});
		</script> -->

		<!-- SCRIPTS 
        ========================================-->
		<script src="js/plagin-js/jquery-1.11.3.js"></script>
		<script src="bootstrap/js/bootstrap.min.js"></script>
		<script src="js/plagin-js/plagin.js"></script>

		<!-- Custom Script 
        ==========================================-->
		<script src="js/custom-scripts.js"></script>
	</body>

</html>
